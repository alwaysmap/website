{{ define "main" }}

<header class="page-header">
  <div class="container-narrow">
    <h1>{{ .Title }}</h1>
  </div>
</header>

<div class="container">
  <!--
    The .Content here is the magic bit that also
    renders the text on the _index.md page in each
    of the content folders, e.g., the content in
    content/blog/_index.md.
  -->
  {{ if .Content }}
  <div class="page-content">
    {{ .Content }}
  </div>
  {{ end }}

  <div class="posts-grid">
    {{ range (.Paginate .Pages).Pages.ByPublishDate.Reverse }}
    <article class="post-card">
      <h3><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
      <div class="post-meta">
        {{ if .Params.author }}
        <span> · By {{ .Params.author }}</span>
        {{ end }}
      </div>
      {{ if .Params.summary }}
      <p class="post-summary">{{ .Params.summary | markdownify }}</p>
      {{ end }}
      <a href="{{ .RelPermalink }}" class="read-more">Read more →</a>
    </article>
    {{ end }}
  </div>

  {{ if ne .Paginator.TotalPages 0 }}
    {{ if or .Paginator.HasNext .Paginator.HasPrev }}
  <div class="paginator" style="margin-top: var(--space-3xl); text-align: center;">
      {{ if .Paginator.HasNext }}
      <a href="{{ .Paginator.Next.URL }}" class="btn btn-secondary">&laquo; Older</a>
      {{ end }}
      {{ if .Paginator.HasPrev }}
      <a href="{{ .Paginator.Prev.URL }}" class="btn btn-secondary">Newer &raquo;</a>
      {{ end }}
  </div>
    {{ end }}
  {{ end }}
</div>

{{ end }}
